<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certification de Lecture</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        iframe { width: 100%; height: 500px; border: 1px solid #ccc; }
        form { margin-top: 20px; }
        label, input, select, button { display: block; margin: 10px auto; }
        .text-input { width: 100%; padding: 10px; font-size: 18px; }
        select { width: 100%; padding: 10px; font-size: 18px; }
    </style>
</head>
<body>
    <h2>Veuillez lire le document avant de signer</h2>

    <!-- Affichage du PDF hébergé sur GitHub Pages -->
    <iframe src="https://protocolelba.github.io/Protocole-LBA/document.pdf" frameborder="0"></iframe>

    <form id="certificationForm">
        <label>
            <input type="checkbox" id="confirmRead" required>
            J'atteste avoir lu et compris le document ci-dessus.
        </label>
        <input type="text" id="societeDeLivraison" placeholder="Société de livraison" required>
        <input type="text" id="entrepriseLivree" placeholder="Entreprise livrée" required>

        <!-- Menu déroulant pour le type d'opération -->
        <label for="typeOperation">Type d'opération :</label>
        <select id="typeOperation" required>
            <option value="Chargement">Chargement</option>
            <option value="Déchargement">Déchargement</option>
        </select>

        <input type="date" id="date" required>
        <input type="time" id="heure" required>

        <!-- Champ pour entrer le nom au lieu de la signature -->
        <label for="nom">Nom (Signature) :</label>
        <input type="text" id="nom" class="text-input" placeholder="Entrez votre nom" required>

        <button type="submit">Soumettre</button>
    </form>

    <script>
        // Configurez votre propre clé publique EmailJS ici
        emailjs.init('rbdMCAW1iExb_Rc5a');  // Remplace par ton vrai UserID

        document.getElementById('certificationForm').addEventListener('submit', function(event) {
            event.preventDefault();  // Empêcher le formulaire de se soumettre normalement

            const societeDeLivraison = document.getElementById('societeDeLivraison').value;
            const entrepriseLivree = document.getElementById('entrepriseLivree').value;
            const typeOperation = document.getElementById('typeOperation').value; // Récupérer le type d'opération
            const date = document.getElementById('date').value;
            const heure = document.getElementById('heure').value;
            const nom = document.getElementById('nom').value; // Prendre le nom au lieu de la signature

            // Vérifier si le champ "Nom" est vide
            if (!nom) {
                alert("Veuillez entrer votre nom avant de soumettre.");
                return;
            }

            const emailParams = {
                societeDeLivraison: societeDeLivraison,
                entrepriseLivree: entrepriseLivree,
                typeOperation: typeOperation,  // Ajouter le type d'opération
                date: date,
                heure: heure,
                nom: nom, // Envoyer le nom comme signature
                to_email: "Dylan.NGARNDO@demathieu-bard.fr, remi.rousseau@demathieu-bard.fr",
            };

            // Envoi de l'email avec EmailJS
            emailjs.send("service_dz2cv9o", "template_hjb10b5", emailParams)
            .then(function(response) {
                console.log("Email envoyé avec succès", response);  // Afficher la réponse en cas de succès
                alert("Données envoyées avec succès !");
            }, function(error) {
                console.error("Erreur lors de l'envoi de l'email", error);  // Afficher l'erreur dans la console
                alert("Erreur lors de l'envoi de l'email. Voir la console pour plus d'infos.");
            });
        });
    </script>
</body>
</html>


